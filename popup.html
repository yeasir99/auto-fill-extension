<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>AutoForm Filler</title>
    <style>
      :root {
        --bg: #f6f7fb;
        --text: #0b1220;
        --muted: #6b7280;
        --card: #ffffff;
        --border: #e7eaf0;
        --primary: #0d6efd;
        --primary-contrast: #ffffff;
        --shadow: 0 1px 2px rgba(0,0,0,0.06), 0 4px 12px rgba(0,0,0,0.06);
      }
      @media (prefers-color-scheme: dark) {
        :root {
          --bg: #0b1220;
          --text: #e5e7eb;
          --muted: #9ca3af;
          --card: #121826;
          --border: #1f2a44;
          --primary: #3b82f6;
          --primary-contrast: #ffffff;
          --shadow: 0 1px 2px rgba(0,0,0,0.35), 0 6px 16px rgba(0,0,0,0.35);
        }
      }
      :root[data-theme="light"] {
        --bg: #f6f7fb;
        --text: #0b1220;
        --muted: #6b7280;
        --card: #ffffff;
        --border: #e7eaf0;
        --primary: #0d6efd;
        --primary-contrast: #ffffff;
        --shadow: 0 1px 2px rgba(0,0,0,0.06), 0 4px 12px rgba(0,0,0,0.06);
      }
      :root[data-theme="dark"] {
        --bg: #0b1220;
        --text: #e5e7eb;
        --muted: #9ca3af;
        --card: #121826;
        --border: #1f2a44;
        --primary: #3b82f6;
        --primary-contrast: #ffffff;
        --shadow: 0 1px 2px rgba(0,0,0,0.35), 0 6px 16px rgba(0,0,0,0.35);
      }

      html, body {
        margin: 0;
        padding: 0;
      }
      body {
        font-family: -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        width: 360px;
        background: var(--bg);
        color: var(--text);
      }
      .wrap { padding: 14px; }
      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 12px;
        background: var(--primary);
        color: var(--primary-contrast);
      }
      .title {
        font-weight: 600;
        font-size: 14px;
      }
      .env {
        font-size: 11px;
        opacity: 0.85;
        margin-left: 8px;
      }
      .toolbar { display: flex; align-items: center; gap: 12px; }
      .icon-btn {
        background: rgba(255,255,255,0.12);
        color: #fff;
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 8px;
        padding: 8px 10px;
        cursor: pointer;
      }
      .icon-btn:hover { background: rgba(255,255,255,0.18); }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 12px;
        box-shadow: var(--shadow);
        padding: 14px;
        margin: 12px;
      }
      .card h3 {
        margin: 0 0 12px 0;
        font-size: 13px;
      }
      .row { display: flex; gap: 12px; }
      .row > * { flex: 1; }
      /* consistent vertical rhythm inside cards */
      .card > * + * { margin-top: 12px; }

      input, select, button {
        width: 100%;
        box-sizing: border-box;
        font-size: 13px;
        border-radius: 10px;
      }
      input, select {
        background: #f3f4f6;
        color: var(--text);
        border: 1px solid var(--border);
        padding: 8px 10px;
      }
      .btn { border: none; padding: 12px 14px; cursor: pointer; }
      .btn-primary { background: var(--primary); color: var(--primary-contrast); }
      .btn-secondary { background: #eef2ff; color: #1f2a44; border: 1px solid #dbe4ff; }
      .btn-ghost { background: transparent; color: var(--text); border: 1px solid var(--border); }
      .btn:disabled { opacity: 0.6; cursor: not-allowed; }
      /* rows keep tight vertical spacing for contained buttons */
      .row .btn { margin-top: 0; }

      .list {
        max-height: 220px;
        overflow-y: auto;
        border: 1px solid var(--border);
        border-radius: 10px;
        background: #fafbff0d;
        margin-top: 8px;
        padding: 4px;
      }
      .item {
        padding: 8px 10px;
        border-bottom: 1px solid var(--border);
        cursor: pointer;
        border-radius: 8px;
      }
      .item:hover { background: rgba(13,110,253,0.06); }
      .selected { background: rgba(13,110,253,0.12); }
      .meta { color: var(--muted); font-size: 12px; margin-top: 6px; }

      .status {
        margin: 12px;
        margin-top: 4px;
        background: rgba(16,185,129,0.12);
        color: #065f46;
        border: 1px solid rgba(16,185,129,0.3);
        border-radius: 10px;
        padding: 8px 10px;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div class="title">AutoForm Filler <span class="env">â€¢ Local</span></div>
      <div class="toolbar">
        <button id="btnOpenPanel" class="icon-btn" title="Open Panel">ðŸ“Œ</button>
        <button id="btnLogout" class="icon-btn" title="Logout" style="display:none;">Logout</button>
        <button id="themeToggle" class="icon-btn" title="Toggle theme">ðŸŒ“</button>
      </div>
    </div>
    <div class="wrap">
      <!-- LOGIN SECTION -->
      <div id="unauth" class="card">
        <h3>Login</h3>
        <input id="email" placeholder="Email" />
        <input id="password" type="password" placeholder="Password" />
        <div class="row">
          <button id="btnLogin" class="btn btn-primary">Login</button>
        </div>
        <div id="loginStatus" class="meta"></div>
      </div>

      <!-- AUTHENTICATED SECTION -->
      <div id="authed" class="card" style="display: none">
        <h3>Data Fill</h3>
        <div class="row">
          <button id="btnFetch" class="btn btn-primary">Fetch Data</button>
        </div>

        <div id="dataList" class="list">
          <p class="meta" style="text-align: center; margin: 10px 0;">No data loaded</p>
        </div>

        <div class="row">
          <button id="btnFill" class="btn btn-primary">Fill Form</button>
          <button id="btnClear" class="btn btn-secondary">Clear Selection</button>
        </div>

        <h3 style="margin-top: 14px;">Phone &amp; OTP</h3>
        <button id="btnGetNumber" class="btn btn-primary">Get Number</button>
        <div id="numberDisplay" class="meta" style="margin-top: 8px; font-weight: 600"></div>
        <button id="btnFillPhone" class="btn btn-primary">Fill Phone Form</button>
        <div class="row">
          <button id="btnGetCode" class="btn btn-secondary">Get Code</button>
          <button id="btnFillCode" class="btn btn-primary">Fill Code</button>
        </div>

        <h3 style="margin-top: 14px;">Address</h3>
        <div class="row">
          <button id="btnFillAddress" class="btn btn-primary">Fill Address</button>
        </div>
        <div class="row">
          <button id="btnFillBank" class="btn btn-secondary">Fill Bank</button>
        </div>

        <div id="status" class="status" style="display:none;"></div>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
